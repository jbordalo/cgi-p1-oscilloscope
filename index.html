<!DOCTYPE html>
<html>
  <head>
    <script id="vertex-shader" type="x-shader/x-vertex">
      attribute float vTimeSample;
      uniform int func;
      uniform float amp;
      uniform float angFreq;
      uniform float phase;
      uniform float time;

      float normalizeInput(float value, float inMin, float inMax, float outMin, float outMax) {
        return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);
      }

      float getImage(float x) {
        if (func == 0) {
          return amp*sin(angFreq * (x+time) + phase);
        } else if (func == 1) {
          return amp*cos(angFreq* (x+time) + phase);
        } else if (func == 2) {
          return amp*tan(angFreq*(x+time)+phase);
        }
      }

      void main(){
          gl_Position.x = normalizeInput(vTimeSample, 0.0, 9999.0, -1.0, 1.0); // normalize [0, 9999] -> [-1, 1]
          gl_Position.y = getImage(gl_Position.x);
          // gl_Position.z = 0.0;
          gl_Position.a = 1.0;
      }
    </script>
    <script id="fragment-shader" type="x-shader/x-fragment">
      precision mediump float;
      void main() {
          gl_FragColor = vec4(0.0, 1.0, 1.0, 1.0);
      }
    </script>
    <script type="text/javascript" src="../Common/webgl-utils.js"></script>
    <script type="text/javascript" src="../Common/initShaders.js"></script>
    <script type="text/javascript" src="../Common/MV.js"></script>
  </head>
  <body>
    <title>Function</title>
    <canvas id="gl-canvas" width="624" height="624">
      Oops... your browser doesn't support the HTML5 canvas element"
    </canvas>
    <br />
    <select id="select-func">
      <option value="sin">Sin</option>
      <option value="cos">Cos</option>
      <option value="tan">Tan</option>
    </select>
    <label>Amplitude: </label>
    <input
      type="range"
      min="0"
      max="3"
      value="0"
      step="0.05"
      class="slider"
      id="amplitude-slider"
    />
    <label>Frequency: </label>
    <input
      type="range"
      min="0"
      max="6.2831852"
      value="3.1415926"
      step="0.05"
      class="slider"
      id="frequency-slider"
    />
    <label>Phase: </label>
    <input
      type="range"
      min="0"
      max="6.2831852"
      value="3.1415926"
      step="0.05"
      class="slider"
      id="phase-slider"
    />
  </body>
  <script type="text/javascript" src="app.js"></script>
</html>
