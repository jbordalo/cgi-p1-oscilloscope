<!DOCTYPE html>
<html>
  <head>
    <script id="vertex-shader" type="x-shader/x-vertex">
      attribute float vTimeSample;
      uniform int func;

      uniform float amp;
      uniform float angFreq;
      uniform float phase;

      uniform float time;

      uniform float vScale;
      uniform float hScale;

      float normalizeInput(float value, float inMin, float inMax, float outMin, float outMax) {
        return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);
      }

      float getImage(float x) {
        if (func == 0) {
          return vScale*amp*sin(angFreq * hScale * (x+time) + phase);
        } else if (func == 1) {
          return vScale*amp*cos(angFreq * hScale * (x+time) + phase);
        }
      }

      void main(){
          gl_Position.x = normalizeInput(vTimeSample, 0.0, 9999.0, -1.0, 1.0); // normalize [0, 9999] -> [-1, 1]
          gl_Position.y = getImage(gl_Position.x);
          // gl_Position.z = 0.0;
          gl_Position.a = 1.0;
      }
    </script>
    <script id="grid-vertex-shader" type="x-shader/x-vertex">
      attribute vec2 gPosition;
      void main(){
        gl_Position = vec4(gPosition, 0.0, 1.0);
      }
    </script>
    <script id="fragment-shader" type="x-shader/x-fragment">
      precision mediump float;
      uniform vec4 vColor;
      void main() {
          gl_FragColor = vColor;
      }
    </script>
    <script type="text/javascript" src="Common/webgl-utils.js"></script>
    <script type="text/javascript" src="Common/initShaders.js"></script>
    <script type="text/javascript" src="Common/MV.js"></script>
    <script type="text/javascript" src="notes.js"></script>
  </head>

  <body>
    <title>CGI - Oscilloscope</title>
    <canvas id="gl-canvas" width="1080" height="720">
      Oops... your browser doesn't support the HTML5 canvas element"
    </canvas>
    <br />
    <label>Y-Scale: </label>
    <select id="vertical-scale-selector">
      <option value="0.1">0.1 V</option>
      <option value="0.2">0.2 V</option>
      <option value="0.5">0.5 V</option>
      <option value="1.0" selected="selected">1.0 V</option>
      <option value="2.0">2.0 V</option>
      <option value="5.0">5.0 V</option>
      <option value="10.0">10.0 V</option>
      <option value="20.0">20.0 V</option>
      <option value="50.0">50.0 V</option>
      <option value="100.0">100.0 V</option>
      <option value="200.0">200.0 V</option>
      <option value="500.0">500.0 V</option>
    </select>
    <label>Y-Signal</label>
    <select id="y-note-selector">
      <option value="C4" selected="selected">C4</option>
      <option value="C4M">C4 Major</option>
      <option value="F4F#">F4 + F4#</option>
      <option value="zero">Zero</option>
    </select>
  </br>
    <label>X-Scale:</label>
    <select id="horizontal-scale-selector">
      <option value="0.0001">1e-4 s</option>
      <option value="0.0002"> 2e-4 s</option>
      <option value="0.0005">5e-4 s</option>
      <option value="0.001">1e-3 s</option>
      <option value="0.002">2e-3 s</option>
      <option value="0.005">5e-3 s</option>
      <option value="0.01">1e-2 s</option>
      <option value="0.02">2e-2 s</option>
      <option value="0.05">5e-2 s</option>
      <option value="0.1">1e-1 s</option>
      <option value="0.2">2e-1 s</option>
      <option value="0.5">5e-1 s</option>
      <option value="1.0" selected="selected">1 s</option>
      <option value="2.0">2 s</option>
      <option value="5.0">5 s</option>
      <option value="10.0">10 s</option>
    </select>
    <label>X-Signal</label>
    <select id="x-note-selector">
      <option value="time" selected="selected">Time</option>
      <option value="C4">C4</option>
      <option value="C4M">C4 Major</option>
      <option value="F4F4#">F4 + F4#</option>
      <option value="zero">Zero</option>
    </select>
  </body>
  <script type="text/javascript" src="app.js"></script>
</html>
